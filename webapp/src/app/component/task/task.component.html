<nz-collapse nzExpandIconPosition="right">
  <nz-collapse-panel *ngFor="let childItem of children;let index = index" [nzHeader]="childrenTitleComponent" [nzActive]="index == 0">
    <ng-template #childrenTitleComponent>
      <div style="display: block;">
        <div style="background: #202932;">
          Step {{index+1}}: 
          <span nz-icon *ngIf="childItem.status == 'In Progress'" style="margin: 0 4px;" [nzType]="'loading'"></span>
          <span nz-icon *ngIf="childItem.status == 'Need to check'" style="color: rgb(255,205,0);margin: 0 4px;" nzType="exclamation-circle" nzTheme="fill"></span>
          <span nz-icon nzType="check-circle" style="color: green;margin: 0 4px;" *ngIf="childItem.status == 'Finished'"  nzTheme="fill"></span>
          <span nz-icon nzType="clock-circle" style="margin: 0 4px;" *ngIf="childItem.status == 'Waiting'"nzTheme="outline"></span>
          <span nz-icon nzType="close-circle" *ngIf="childItem.status == 'Failed'" style="color: rgb(255,73,68);margin: 0 4px;" nzTheme="fill"></span>
          {{childItem.name}}
          
        </div>
        <div style="font-size: 12px;">
          Start Time: {{childItem.startTime}}
        </div>
        <div *ngIf="childItem.finishTime" style="font-size: 12px;">
          Finish Time: {{childItem.finishTime}}
        </div>
      </div>
    </ng-template>
    <pre *ngIf="childItem.response" style="white-space: pre-wrap;font-size: 10px;">Anaylsis Content: {{childItem.response}}</pre>
    <pre *ngIf="childItem.children && childItem.children.length > 0"><app-task [children]="childItem.children"></app-task></pre>

    <nz-spin nzSize="large" *ngIf="!childItem.response || childItem.status=='In Progress'" nzSimple style="width: 100%;height: 100%;display: flex;justify-content: center;align-items: center;"></nz-spin>
  </nz-collapse-panel>
</nz-collapse>